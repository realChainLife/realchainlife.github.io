<!DOCTYPE HTML>
<html>
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>A Deep Dive: PBFT and The Hyperledger Blockchain | Blog</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Hyperledger" />
	<meta name="keywords" content="Consensus Mechanism" />
	<meta name="author" content="" />

  <!-- Facebook and Twitter integration -->
	<meta property="og:title" content=""/>
	<meta property="og:image" content=""/>
	<meta property="og:url" content=""/>
	<meta property="og:site_name" content=""/>
	<meta property="og:description" content=""/>
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />
	
	<link href="https://fonts.googleapis.com/css?family=Grand+Hotel" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Fira+Sans:100,200,300,400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="css/bootstrap.css">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="css/magnific-popup.css">

	<!-- Flexslider  -->
	<link rel="stylesheet" href="css/flexslider.css">

	<!-- Owl Carousel -->
	<link rel="stylesheet" href="css/owl.carousel.min.css">
	<link rel="stylesheet" href="css/owl.theme.default.min.css">
	
	<!-- Flaticons  -->
	<link rel="stylesheet" href="fonts/flaticon/font/flaticon.css">

	<!-- Theme style  -->
	<link rel="stylesheet" href="css/style.css">

	<!-- Modernizr JS -->
	<script src="js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->

	</head>
	<body>
		
	<div class="colorlib-loader"></div>

	<div id="page">
		<nav class="colorlib-nav" role="navigation">
			<div class="top-menu">
				<div class="container-fluid">
                    <div class="row">
                        <div class="col-xs-2">
                            <div id="logo"><a href="/"><img src="/blog/blog-img/logo.png" alt=""></a></div>
                        </div>
                        <div class="col-xs-10 text-right menu-1">
                            <ul>
                                <li><a href="/">Home</a></li>
                                <li class="has-dropdown">
                                    <a href="/portfolio">Portfolio</a>
                                    <ul class="dropdown">
                                        <li><a href="/portfolio/development.html">System Development</a></li>
                                        <li><a href="/portfolio/speaking.html">Speaking</a></li>
                                        <li><a href="/portfolio/workshop.html">Workshops & Training</a></li>
                                    </ul>
                                </li>
                                <li class="active"><a href="/blog">Blog</a></li>
                                <li><a href="/resume">Resume</a></li>
                                <li><a href="/contact">Contact</a></li>
                            </ul>
                        </div>
                    </div>
				</div>
			</div>
		</nav>

		<div id="colorlib-container">
			<div class="container">
				<div class="row">
					<div class="content">
						<article class="blog-entry">
							<div class="blog-wrap">
								<span class="category text-center"><a href="">Cryptography</a></span>
								<h2 class="text-center"><a href="">A Deep Dive: PBFT and The Hyperledger Blockchain</a></h2>
								<span class="category text-center"><a href=""><i class="icon-calendar3"></i> February 11, 2018</a></span>
							</div>
							<div class="desc">
                                <p>Blockchain networks are designed as peer-to-peer systems that don‚Äôt have 
                                    centralized authority points to function but for the decentralized infrastructure
                                    to exist and work, they need an in-built decision-making feature commonly 
                                    known as <i>consensus</i>. When implemented, consensus algorithms allow every 
                                    member of the network to partcipate in the blockchain development by making 
                                    decisions on the network's future.
                                </p>
                                <p>In my previous post, <a href="https://realchainlife.github.io/blog/posts/demystifying-consensus-algorithms.html">Demystifying Consensus Algorithms</a>, 
                                    we delved into the various consensus algorithms discussing some base functionalities 
                                    and mechanisms of these consensus algorithms. We highlighted certain benefits of the 
                                    Practical Byzantine Fault Tolerance (PBFT) Algorithm and why it was the algorithm of 
                                    choice for the Hyperledger Blockchain.
                                </p>
                                <p>In this post we will answer the question, what is practical Byzantine 
                                    Fault Tolerance as a complete beginner's guide. We'll cover it orgins, 
                                    how it differs from other algorithms and why its used on the Hyperledger
                                    and other Blockchain solutions.
                                </p>
                                <h2>Evolution of Byzantine Fault Tolerance</h2>
                                <p>Practical Byzantine Fault Tolerance is a consensus algorithm introduced 
                                    in the late 90s as a solution to a problem presented by the previous use 
                                    of BGP (<i>Byzantine Generals Problem</i>). pBFT was designed after extensive
                                    research and has been optimized with a diverse set of solutions in practise
                                    to work efficiently in asynchronous systems.
                                </p>
                                <p>In the context of distributed systems, BFT is the ability of a blockchain 
                                    network to function as desired and correctly reach a sufficient consensus 
                                    despite malicious components (nodes) of the network failing or propagating 
                                    incorrect information to other peers. The objective is to defend against 
                                    catastrophic system failures by mitigating the influence these malicious 
                                    nodes have on the correct function of the network and the right consensus 
                                    that is reached by the honest nodes in the system.
                                </p>
                                <h2>Practical Byzantine Fault Tolerant Mechanism</h2>
                                <p>PBTF is a robust, high-performance algorithm that comes with only a 3% 
                                            increase in latency over a standard unreplicated BFT models.
                                </p>
                                <p>Unlike PoW or PoS mechanisms, pBFT doesn‚Äôt require any hashing power to add 
                                    new blocks to the underlying blockchain. This makes the algorithm much more 
                                    energy efficient and eventually allows it to avoid issues with centralization 
                                    that PoW (mining pools) and PoS (large stake holders cutting deals behind the 
                                    scenes) suffer from.
                                </p>
                                <p>Nodes in a pBFT blockchain system are sequentially ordered with one node being 
                                    the <strong>primary node</strong> and others considered as <strong>secondary nodes</strong>. 
                                    All of the nodes within the system communicate with each other and the goal is for 
                                    all of the honest nodes to come to an agreement of the state of the system through 
                                    a majority. Any node in the system can assume the role of primary if an old primary 
                                    node fails or starts acting maliciously. The primary node is changed during every 
                                    consensus round nonetheless.
                                </p>
                                <figure data-rt-type="image" data-rt-align="center" data-rt-max-width="60" class="w-richtext-align-center" 
                                    style="max-width: 60%;" data-rt-max-height="33.75">
                                    <div><img src="/blog/blog-img/practical-byzantine-fault-tolerance.png" alt=""></div>
                                    <figcaption>Illustration: pBFT</figcaption>
                                </figure>
                                <p>The pBFT model works on the assumption that, at any point in time, the total 
                                    amount of malicious nodes on the network doesn't exceed more than 1/3 of the 
                                    total number of network nodes in the system in a given window of vulnerability. 
                                    The more nodes a pBFT system has, the safer it becomes.
                                </p>
                                <p>Block generation and confirmation in this consensus group follows more of a 
                                    <i>‚ÄúCommander and Lieutenant‚Äù</i> format. When a client sends a request to the primary
                                    node the request is processed in three phases:
                                </p>
                                <ul>
                                    <li><strong>Pre-prepare phase</strong>: Here, the primary node announces the request
                                        to the secondary nodes as a multicast pre-prepare message. The secondary
                                        nodes receive a <i>new block</i> suggestion that the group should agree on.</li>
                                    <li><strong>Prepare phase</strong>: Once received, every node executes the request by 
                                        <i>validating</i> the correctness and authencity of the detailed record. Another
                                        multicast reply is then sent to the client.</li>
                                    <li><strong>Commit phase</strong>: In this phase, the client prepares to receive a message
                                        from the <i>f + 1</i> majority nodes to ensure that a sufficient number of nodes 
                                        have agreed on the new block proposed by the primary node.</li>
                                </ul>
                                <p>One PBFT algorithm needs to have a minimum of <i>3f + 1</i> replicas (where f is the 
                                    maximum number of faulty nodes) to ensure that its Byzantine Fault tolerance 
                                    is unharmed. This is the mathematical representation of 2/3rd majority.
                                </p>
                                <h2>PBFT Implementation on Hyperledger</h2>
                                <p>"Hyperledger" is an open-source collaborative consortium for blockchain projects 
                                    hosted by the Linux Foundation using a permissioned version of pBFT for the platform. 
                                    Currently there are at least 4 different implementations of blockchain frameworks 
                                    under Hyperledger:
                                </p>
                                <ul>
                                    <li>Fabric (IBM)</li>
                                    <li>Corda (R3)</li>
                                    <li>Iroha</li>
                                    <li>Sawtooth Lake (Intel)</li>
                                </ul>
                                <p><strong>In Fabric</strong></p>
                                <p>All validation peers keep open connection to each other. You can submit your transaction 
                                            to any of them, and this transaction will be broadcasted to other peers in the network. 
                                            One of peer is elected as "leader". At the moment when a new block is going to be generated:
                                </p>
                                <ol>
                                    <li>The leader orders the transactions candidates that should be included in a block, 
                                        and broadcasts this list of ordered transactions to all other validation peers in 
                                        the network.</li>
                                    <li>When each of the Validation Peers receives the ordered list of transactions, each 
                                        validation peer does the following:
                                          
                                        <quote>It starts executing the ordered transactions one by one. As soon as all the 
                                            transactions are executed, it will calculate the hash code for the newly 
                                            created bloc (the hash code includes hashes for executed transactions and 
                                            final state of the world). Then it broadcasts the resulting hash code to other 
                                            peers in the network, and starts counting the responses from them.
                                        </quote>
                                    </li>
                                </ol>
                                <p>If it sees that 2/3 of all validation peers have the same hash code, it will commit 
                                    the new block to its local copy of the ledger.
                                </p>
                                <p><strong>In Corda</strong></p>
                                <p>PBFT is not used. This implementation uses another architecture approach. In Corda, 
                                    consensus is provided by notaries. It is up to the notary operator which consensus 
                                    algorithm they use. BFT is one option. You can see a Corda BFT notary sample 
                                    <a href="https://github.com/corda/corda/tree/master/samples/notary-demo">here</a>.
                                </p>
                                <ol>
                                    <li>The transaction is validated by a cluster of one or more notaries. Notaries 
                                        are nodes with the sole purpose of deconflicting double-spend attempts.</li>
                                    <li>Using a standard BFT algorithm. Each node in the notary cluster votes on 
                                        whether they consider the transaction to be a double-spend attempt. The final 
                                        decision is based on a majority rule, and can tolerate up to 1/3rd of the 
                                        nodes in the cluster being malicious.</li>
                                    <li>In Corda, there is no central store of information that the transaction is 
                                        committed to. The notary cluster simply adds the spent state reference to an 
                                        internal database table. It will check future attempts to spend states against 
                                        this table, and reject the spending attempt if the state reference is already 
                                        stored there.
                                    </li>
                                </ol>
                                <p><strong>In Hyperledger Sawtooth</strong></p>
                                <ul>
                                    <li><strong>PoET</strong> Proof of Elapsed Time (optional Nakamoto-style consensus algorithm used for 
                                        Sawtooth). PoET with SGX has BFT. PoET Simulator has CFT. Not CPU-intensive as 
                                        with PoW-style algorithms, although it still can fork and have stale blocks . 
                                        See <a href="https://sawtooth.hyperledger.org/docs/core/releases/latest/architecture/poet.html">PoET specification</a>
                                    </li>
                                    <li><strong>RAFT Consensus</strong> algorithm that elects a leader for a term of arbitrary time. Leader 
                                        replaced if it times-out. Raft is faster than PoET, but is not BFT (Raft is CFT). 
                                        Also Raft does not fork. Hyperledger Sawtooth has the advantage of having Unpluggable 
                                        Consensus. An algorithm can be changed without reinitializing the blockchain or even 
                                        restarting the software.
                                    </li>
                                </ul>
                                <p>Since permissioned chains use small consensus groups and don‚Äôt need the same decentralization 
                                            as public blockchains, pBFT is effective for providing high-throughput transactions.
                                </p>
                                <h2>Limitations of PBFT</h2>
                                <p>The pBFT consensus model works efficiently only when the number of nodes in the distributed 
                                            network is small due to the high communication overhead that increases exponentially with every 
                                            extra node in the network.
                                </p>
                                <ul>
                                    <li><strong>Sybil attacks</strong> : The pBFT mechanisms are susceptible to Sybil attacks, where a
                                        single entity controls multiple network nodes - compromising network security. This 
                                        threat is reduced with larger network sizes but considering the scalability issue of 
                                        pBFT it typically needs to be used in combination with another consensus mechanism.
                                    </li>
                                    <li><strong>Scaling</strong> : pBFT does not scale well because of its communication intensive overhead. 
                                        This is because each node must talk to every other node to keep the network secure, which 
                                        can quickly grow into a huge communication cost as the amount of nodes scales upwards. 
                                        When the number of nodes in the network increase so does the time taken to respond to the 
                                        request. pBFT is a promising consensus solution when the group of nodes is small but becomes 
                                        inefficient for large networks.
                                    </li>
                                </ul>
                                <h2>Summary</h2>
                                <p>Permissioned blockchains are private and operated by invite with known identities, meaning there is 
                                    already an element of trust between parties. This mitigates the need for a trustless environment and 
                                    allows the network to reap the benefits of pBFT without the downsides.
                                </p>
                            </div>
                        </article>
                        
					</div>

					<aside class="sidebar">
                        <div class="side">
                            <h2 class="sidebar-heading">About Me</h2>
                            <p>Hi there, I‚Äôm Sonia aka realchain ï ‚Ä¢·¥•‚Ä¢ î. I am an independent <b>Bot & Protocol Developer</b>, <b>writer</b> 
                                and <b>speaker</b> from the Africa. I <a href="/blog/archive/">write</a>, <a href="https://twitter.com/realchainlife">tweet</a>, 
                                <a href="/portfolio/speaking.html">speak</a> and <a href="http://github.com/realchainlife">share code</a> about building 
                                decentralized systems. We can <a href="/contact/">work together</a>
                            </p>
                            <p>
                                <ul class="colorlib-social-icons">
                                    <li><a href="https://t.me/realchainlife"><i class="icon-telegram"></i></a></li>
                                    <li><a href="https://reddit.com/u/realchainlife"><i class="icon-reddit"></i></a></li>
                                    <li><a href="https://github.com/realchainlife"><i class="icon-github"></i></a></li>
                                    <li><a href="https://twitter.com/realchainlife"><i class="icon-twitter"></i></a></li>
                                </ul>
                            </p>
                            </div>
                            <div class="side-wrap">
                                <h2 class="sidebar-heading">Projects</h2>
                                <ul class="[ list-ui  list-ui--small ]  mb">
                                      <li><a href="http://playmakerchain.com"><strong>PlayMaker Chain ‚öΩÔ∏è</strong></a> ‚Äì coming soon‚Ä¶</li>
                                      <li><a href="http://factory24.org"><strong>Afrolynk Factory24 üìà</strong></a> ‚Äì here now ‚Ä¶</li>
                                      <li><a href="http://realchainlife.github.io/portfolio/workshops.html"><strong>Nairobi IPFS</strong></a> ‚Äì Here Now! </li>
                                </ul>
                            </div>
                            <div class="side-wrap">
                                <h2 class="sidebar-heading">Upcoming Events</h2>
                                <ul class="[ list-ui  list-ui--small ]  mb">
                                    <li><a href=""><strong>IPFS Meetup</strong></a> ‚Äì Nairobi, (Kenya) July 2019</li>
                                    <li><a href="https://africanwomenintech.com/"><strong>AWIT Conference</strong></a> ‚Äì Nairobi, (Kenya) July 2019</li>
                                    <li><a href="http://afrolynk.com"><strong>Afrolynk Conference</strong></a> ‚Äì Berlin, (Germany) September 2019</li>
                                    <li><a href="https://maltablockchainsummit.com/"><strong>AI & Blockchain Summit</strong></a> ‚Äì Nairobi, (Kenya) July 2019</li>
                                </ul>
                            </div>
                            <div class="side-wrap">
                                <h2 class="sidebar-heading">Popular Posts</h2>
                                <div class="f-entry">
                                    <a href="#" class="featured-img" style="background-image: url(/blog/blog-img/screenshot-ff-import-blocked-by-js.png);"></a>
                                    <div class="desc">
                                        <span><i class="icon-calendar3"></i> March 20, 2018</span>
                                        <h3><a href="#">Let's Decentralize The Web</a></h3>
                                    </div>
                                </div>
                                <div class="f-entry">
                                    <a href="#" class="featured-img" style="background-image: url(/blog/blog-img/what-is-ipfs.png);"></a>
                                    <div class="desc">
                                        <span><i class="icon-calendar3"></i> February 22, 2018</span>
                                        <h3><a href="#">Is IPFS The Permanent Web</a></h3>
                                    </div>
                                </div>
                                <div class="f-entry">
                                    <a href="#" class="featured-img" style="background-image: url(/blog/blog-img/practical-byzantine-fault-tolerance.png);"></a>
                                    <div class="desc">
                                        <span><i class="icon-calendar3"></i> February 11, 2018</span>
                                        <h3><a href="#">BFT and The Hyperledger Blockchain</a></h3>
                                    </div>
                                </div>
                                <div class="f-entry">
                                    <a href="#" class="featured-img" style="background-image: url(/blog/blog-img/commit-message-small.png);"></a>
                                    <div class="desc">
                                        <span><i class="icon-calendar3"></i> January 27, 2018</span>
                                        <h3><a href="#">Demystifying Consensus Algorithms</a></h3>
                                    </div>
                                </div>
                            </div>
                            <div class="side-wrap">
                                <h2 class="sidebar-heading">Blockquote</h2>
                                <blockquote>
                                    <p>Let's decentralize the web! <b>"Knowing Is Not Enough, We Must Apply"</b></p>
                                </blockquote>
                            </div>
                            <div class="side">
                                <h2 class="sidebar-heading">Subscribe To My Newsletter</h2>
                                <div class="row">
                                    <div class="col-md-12 col-md-offset-0">
                                        <div class="form-group">
                                            <input type="text" class="form-control form-email text-center" id="email" placeholder="Enter your email">
                                            <button type="submit" class="btn btn-primary btn-subscribe">Subscribe</button>
                                        </div>
                                    </div>
                                    <p>
                                        <ul class="colorlib-social-icons text-center">
                                            <li><a href="https://t.me/realchainlife"><i class="icon-telegram"></i></a></li>
                                            <li><a href="https://reddit.com/u/realchainlife"><i class="icon-reddit"></i></a></li>
                                            <li><a href="https://github.com/realchainlife"><i class="icon-github"></i></a></li>
                                            <li><a href="https://twitter.com/realchainlife"><i class="icon-twitter"></i></a></li>
                                        </ul>
                                    </p>
                                </div>
                            </div>
                            <div class="side-wrap">
                                <h2 class="sidebar-heading">Video Post</h2>
                                <p>Juan explains why the web is in danger and how the Interplanetary Files System (IPFS) is creating 
                                    a new way of sharing knowledge.
                                </p>
                                <div class="video colorlib-video" style="background-image: url(/blog/blog-img/ipfs.webp);">
                                    <a href="https://www.youtube.com/watch?v=2RCwZDRwk48" class="popup-vimeo"><i class="icon-play"></i></a>
                                    <div class="overlay"></div>
                                </div>
                            </div>
                        </div>
                    </aside>
				</div>
			</div>
		</div>

		<footer id="colorlib-footer" role="contentinfo">
                <div class="overlay"></div>
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-8 col-sm-12 col-md-offset-2 slider-text">
                            <div class="slider-text-inner text-center">
                                <p>
                                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                                    <small class="block">&copy; <script>document.write(new Date().getFullYear());</script> Sonia John</small>
                                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </footer>
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="icon-arrow-up2"></i></a>
	</div>
	
	<!-- jQuery -->
	<script src="js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="js/jquery.waypoints.min.js"></script>
	<!-- Flexslider -->
	<script src="js/jquery.flexslider-min.js"></script>
	<!-- Owl carousel -->
	<script src="js/owl.carousel.min.js"></script>
	<!-- Magnific Popup -->
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="js/magnific-popup-options.js"></script>
	<!-- Main -->
	<script src="js/main.js"></script>

	</body>
</html>

